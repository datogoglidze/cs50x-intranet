{% extends "layout.html" %} {% block title %}Documents {% endblock %} {% block
main %}
<style>
    .box {
        background: #ffffff;
        box-shadow: 0 15px 25px rgba(0, 0, 0, 0.2);
        border-radius: 10px;
    }

    .btn.create {
        font-size: 16px;
        letter-spacing: 2px;
        color: #ffffff;
        background: #00b4d8;
    }

    .btn.create:hover {
        background: #0077b6;
        color: #fff;
    }
</style>

{% if is_admin != True %}
<div class="box position-relative mb-5 p-4">
    <form class="row g-0" action="/documents" method="post">
        <div class="col-md m-md-2 form-floating mb-3">
            <input
                class="form-control"
                id="floatingDate"
                autocomplete="off"
                autofocus type="text"
                name="dates"
                placeholder="Dates"
                required/>
            <label for="floatingDate">Dates</label>
        </div>
        <div class="col-md m-md-2 form-floating mb-3">
            <select class="form-select" id="floatingCategory" name="category" required>
                <option value="" disabled selected></option>
                {% for k, v in categories %}
                <option value="{{ k }}">{{ v }}</option>
                {% endfor %}
            </select>
            <label for="floatingCategory">Category</label>
        </div>
        <button class="btn create col-md m-md-2 mt-3 mb-2 p-2" type="submit">Create</button>
    </form>
</div>
{% endif %}

{% if documents %}
<div class="box table-responsive position-relative p-4">
    <table
        class="table table-hover caption-top align-middle text-center"
    >
        <caption class="fw-bold">All Documents</caption>
        <thead class="table-dark align-middle">
        <tr>
            <th scope="col" class="px-3">#</th>
            <th scope="col">Creation Time</th>
            <th scope="col">Category</th>
            <th scope="col">File</th>
            {% if is_admin != True %}
            <th scope="col" class="px-3">Status</th>
            {% else %}
            <th scope="col">Status</th>
            <th scope="col" class="px-3">Action</th>
            {% endif %}
        </tr>
        </thead>
        <tbody class="table-group-divider">
        {% for document in documents %}
        <tr>
            <td class="px-3 fw-normal">{{ loop.index }}</td>
            <td class="fw-normal">{{ document.creation_date }}</td>
            <td class="fw-normal">{{ document.category }}</td>
            <td>
                <a
                    class="link-dark link-offset-3 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="{{ document.directory }}"
                    target="_blank"
                ><i class="bi bi-link-45deg fs-5"></i></a
                >
            </td>
            {% if is_admin != True %}
            <td class="px-3"><i class="bi bi-circle-fill text-{{ document.status }}"></i></td>
            {% else %}
            <td><i class="bi bi-circle-fill text-{{ document.status }}"></i></td>
            <td class="px-3">
                <form class="row g-0" action="/update_document" method="post">
                    <input
                        name="document_id"
                        type="hidden"
                        value="{{ document.id }}"
                    />
                    <button class="col-md m-2 btn btn-success" type="submit" name="new_category" value="success">
                        Approve
                    </button>
                    <button class="col-md m-2 btn btn-danger" type="submit" name="new_category" value="danger">Reject
                    </button>
                </form>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% endblock %}
